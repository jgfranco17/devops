name: devops-common
description: DevOps CLI - Simplifying your CI/CD pipelines
version: 0.0.2
repo_url: https://github.com/jgfranco17/devops

codebase:
  language: go
  dependencies: go.mod
  install:
    fail_fast: true
    env:
      CGO_ENABLED: "0"
      GOOS: "linux"
      GOARCH: "amd64"
    steps:
      - go mod download all
      - go mod tidy
      - go mod verify
  test:
    fail_fast: true
    steps:
      - go clean -testcache
      - go test -cover ./...
  build:
    fail_fast: true
    env:
      CGO_ENABLED: "0"
      GOOS: "linux"
      GOARCH: "amd64"
      GO111MODULE: "on"
    steps:
      - go build -ldflags="-s -w" -o ./devops .
      - chmod +x ./devops
